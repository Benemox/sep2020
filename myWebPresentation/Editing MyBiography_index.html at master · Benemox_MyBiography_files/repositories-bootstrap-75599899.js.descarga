System.register(["./vendor.js","./frameworks.js"],(function(){"use strict";var e,t,s,n,a,o,r,i,l,c,d,u,f,m,p,h,g,j,v,y,b,L,w,T,E,k,S,M,_,A;return{setters:[function(y){e=y._,t=y.y,s=y.z,n=y.a6,a=y.v,o=y.h,r=y.f,i=y.g,l=y.o,c=y.c,d=y.a,u=y.r,f=y.b,m=y.J,p=y.R,h=y.q,g=y.j,j=y.a7,v=y.a8},function(e){y=e.b,b=e.l,L=e.d,w=e.a,T=e.r,E=e.Z,k=e.k,S=e.aE,M=e.p,_=e.T,A=e.b8}],execute:function(){let H=class BranchFilterElement extends HTMLElement{constructor(){super(...arguments),this.abortSearch=null,this.originalSelectedItem=null}submit(e){e.preventDefault()}resetField(e){if("Escape"!==o(e))return;const t=this.field.value.trim();this.field.value="",t&&this.search()}reset(){this.field.focus(),this.field.value="",r(this.field,"input")}get activeFilter(){var e;return null!==(e=this.filters.find(e=>e.classList.contains("selected")))&&void 0!==e?e:null}async search(){var e;this.originalSelectedItem||(this.originalSelectedItem=this.activeFilter);const t=this.field.value.trim().length>0,s=function(e){const t=e.form;if(e.value.trim()){const s=new URL(t.action,window.location.origin),n=new URLSearchParams(s.search.slice(1)),a=t.elements.namedItem("utf8");return a instanceof HTMLInputElement&&n.append("utf8",a.value),n.append("query",e.value),s.search=n.toString(),s.toString()}return i(t,"data-reset-url")}(this.field);this.classList.toggle("is-search-mode",t),this.classList.add("is-loading");for(const o of this.filters)o.classList.remove("selected");t?this.allFilter.classList.add("selected"):this.originalSelectedItem&&(this.originalSelectedItem.classList.add("selected"),this.originalSelectedItem=null),null===(e=this.abortSearch)||void 0===e||e.abort();const{signal:n}=this.abortSearch=new AbortController;try{const e=await y(document,s,{signal:n});b(null,"",s),this.result.innerHTML="",this.result.appendChild(e)}catch(a){}n.aborted||this.classList.remove("is-loading")}};e([t],H.prototype,"field",void 0),e([t],H.prototype,"result",void 0),e([t],H.prototype,"allFilter",void 0),e([s],H.prototype,"filters",void 0),e([n(100)],H.prototype,"search",null),H=e([a],H);let I=class BranchFilterItemElement extends HTMLElement{get branch(){return this.getAttribute("branch")}get branches(){const e=this.closest("branch-filter").querySelectorAll("branch-filter-item");return Array.from(e).filter(e=>e.branch===this.branch)}loading(e){for(const t of this.branches)t.spinner.hidden=!e,t.destroyButton&&(t.destroyButton.hidden=e)}set mode(e){for(const t of this.branches)t.classList.toggle("Details--on","restore"===e)}async restore(e){e.preventDefault(),this.loading(!0);const t=e.target;let s;try{s=await fetch(t.action,{method:t.method,body:new FormData(t),headers:{"X-Requested-With":"XMLHttpRequest"}})}catch(n){}finally{s&&s.ok||location.reload(),this.loading(!1)}this.mode="destroy"}async destroy(e){e.preventDefault(),this.loading(!0);const t=e.target;let s;try{s=await fetch(t.action,{method:t.method,body:new FormData(t),headers:{"X-Requested-With":"XMLHttpRequest"}})}catch(n){}finally{s&&s.ok||location.reload(),this.loading(!1)}this.mode="restore"}};async function x(e){const t=e.form;f(t,"#release_draft",HTMLInputElement).value="1",q(e,"saving");try{const s=await(await L(t.action,{method:t.method,body:new FormData(t),headers:{Accept:"application/json"}})).json();return q(e,"saved"),setTimeout(q,5e3,e,"default"),r(t,"release:saved",{release:s}),s}catch(s){throw q(e,"failed"),s}}function C(e){const t=c(e,".js-releases-marketplace-publish-container"),s=f(t,".js-releases-marketplace-publish-preview");e.checked?s.classList.remove("d-none"):s.classList.add("d-none")}function q(e,t){for(const s of e.querySelectorAll(".js-save-draft-button-state"))s.hidden=s.getAttribute("data-state")!==t;e.disabled="saving"===t}function F(e){const t=document.querySelector(".js-release-target-wrapper");if(null!=t){switch(e){case"valid":t.classList.add("d-none");break;case"loading":break;default:t.classList.remove("d-none")}for(const t of document.querySelectorAll(".js-tag-status-message"))t.hidden=t.getAttribute("data-state")!==e}}e([t],I.prototype,"destroyButton",void 0),e([t],I.prototype,"spinner",void 0),I=e([a],I),l(".js-new-badge-autodismiss",{constructor:HTMLFormElement,add:e=>{const t=c(e,"details");t.addEventListener("toggle",()=>{t.hasAttribute("open")&&L(e.action,{method:e.method,body:new FormData(e)})})}}),l(".repository-import",{subscribe:e=>w(e,"socket:message",(function(e){const t=e.detail.data;t.redirect_to&&(document.location.href=t.redirect_to,e.stopImmediatePropagation())}))}),d("change","input.js-repository-import-lfs-opt",(function({currentTarget:e}){const t=parseInt(e.getAttribute("data-percent-used")||""),s=c(e,".js-repository-import-lfs-container"),n=e.getAttribute("data-used")||"";f(s,".js-repository-import-lfs-warn").classList.toggle("d-none",!(t>100)),f(s,".js-usage-bar").classList.toggle("exceeded",t>=100),f(s,".js-usage-bar").setAttribute("aria-label",`${t}%`),f(s,".js-repository-import-lfs-progress").style.width=`${t}%`,f(s,"span.js-usage-text").textContent=n})),u(".js-repository-import-author-form",(async function(e,t){const s=await t.html();c(e,".js-repository-import-author").replaceWith(s.html)})),d("click",".js-repository-import-projects-cancel-button",(function(){const e=f(document,".js-repository-import-projects-cancel-form",HTMLFormElement);T(e)})),d("tab-container-changed",".js-branches-tags-tabs",(async function(e){const t=e.detail.relatedTarget,s=e.currentTarget;if(!s)return;let n,a;for(const r of s.querySelectorAll("[data-controls-ref-menu-id]")){if(!(r instanceof m||r instanceof p))return;const e=i(r,"data-controls-ref-menu-id"),s=t.id===e;r.hidden=!s,s?a=r:n||(n=r.input?r.input.value:"")}const o=a&&a.input;o&&(a&&void 0!==n&&(o.value=n),o.focus())})),l(".js-pulse-contribution-data",e=>{!async function(e){const t=e.getAttribute("data-pulse-diffstat-summary-url");let s;try{t&&(s=await async function(e){return y(document,e)}(t),function(e,t){t.innerHTML="",t.appendChild(e)}(s,e))}catch(n){const t=f(e,".js-blankslate-loading"),s=f(e,".js-blankslate-error");t.classList.add("d-none"),s.classList.remove("d-none")}}(e)}),d("change",".js-releases-marketplace-publish-field",(function(e){C(e.currentTarget)})),l(".js-releases-marketplace-publish-field",(function(e){C(e)})),d("click",".js-save-draft",(function(e){x(e.currentTarget),e.preventDefault()})),d("click",".js-timeline-tags-expander",(function(e){const t=e.currentTarget;c(t,".js-timeline-tags").classList.remove("is-collapsed")})),d("release:saved",".js-release-form",(function(e){const t=e.detail.release,s=e.currentTarget,n=s.getAttribute("data-repo-url"),a=t.update_url||z("tag",n,t.tag_name);if(s.setAttribute("action",a),t.update_authenticity_token){s.querySelector("input[name=authenticity_token]").value=t.update_authenticity_token}const o=t.edit_url||z("edit",n,t.tag_name);b(E(),document.title,o);const r=document.querySelector("#delete_release_confirm form");if(r){const e=t.delete_url||z("tag",n,t.tag_name);if(r.setAttribute("action",e),t.delete_authenticity_token){f(r,"input[name=authenticity_token]",HTMLInputElement).value=t.delete_authenticity_token}}const i=s.querySelector("#release_id");if(!i.value){i.value=t.id;const e=document.createElement("input");e.type="hidden",e.name="_method",e.value="put",s.appendChild(e)}})),d("click",".js-publish-release",(function(){f(document,"#release_draft",HTMLInputElement).value="0"}));const R=new WeakMap;async function D(e){if(!e.value)return;if(e.value===R.get(e))return;F("loading"),R.set(e,e.value);const t=i(e,"data-url"),s=new URL(t,window.location.origin),n=new URLSearchParams(s.search.slice(1));n.append("tag_name",e.value),s.search=n.toString();try{const t=await(await L(s.toString(),{headers:{Accept:"application/json"}})).json();"duplicate"===t.status&&parseInt(e.getAttribute("data-existing-id"))===parseInt(t.release_id)?F("valid"):(f(document,".js-release-tag .js-edit-release-link").setAttribute("href",t.url),F(t.status))}catch(a){F("invalid")}}function z(e,t,s){return`${t}/releases/${e}/${s}`}function P(e){const t=c(e,"form",HTMLFormElement).querySelector(".js-previewable-comment-form");if(!t)return;let s=t.getAttribute("data-base-preview-url");s||(s=String(t.getAttribute("data-preview-url")),t.setAttribute("data-base-preview-url",s));const n=h(e,'input[name="release[tag_name]"], input[name="release[target_commitish]"]:checked',HTMLInputElement),a=new URL(s,window.location.origin),o=new URLSearchParams(a.search.slice(1));for(const r of n)r.value&&o.append(r.name,r.value);a.search=o.toString(),t.setAttribute("data-preview-url",a.toString())}l("input.js-release-tag-field",{constructor:HTMLInputElement,initialize(e){D(e),e.addEventListener("blur",(function(){D(e)}))}}),d("change",".js-release-tag",(function(e){P(e.currentTarget)})),l(".js-release-form .js-previewable-comment-form",(function(e){P(f(c(e,"form"),".js-release-tag"))})),d("auto-check-message-updated",".js-rename-branch-input",(function(e){!function(e){const t=c(e,".js-rename-branch-form"),s=h(t,".js-rename-branch-new-name");let n=e.value;if(n!==e.defaultValue&&""!==n){const e=t.querySelector(".js-rename-branch-autocheck-message");e&&e.hasAttribute("data-normalized-name")&&(n=i(e,"data-normalized-name"));for(const t of s)t.textContent=n}}(e.currentTarget)})),k("keydown",".js-tree-finder-field",e=>{"Escape"===e.key&&(e.preventDefault(),history.back())});l(".js-tree-finder",e=>{const t=f(e,".js-tree-finder-field",HTMLInputElement),s=f(e,".js-tree-browser-results");if(s.childElementCount>0)return;(async e=>{if(!(e instanceof S))return;const t=i(e,"data-url"),s=f(e,".js-tree-browser-result-template",HTMLTemplateElement),{paths:n}=await(await L(t)).json();e.addLazyItems(n,e=>{const t=s.content.cloneNode(!0).firstElementChild,n=f(t,".js-tree-browser-result-anchor",HTMLAnchorElement),a=f(n,".js-tree-browser-result-path"),o=new URL(n.href,window.location.origin);return o.pathname=`${o.pathname}/${encodeURI(e)}`,n.href=String(o),n.id=`entry-${Math.random().toString().substr(2,5)}`,a.textContent=e,t}),e.sort()})(e);const n=new g(t,s);n.start(),e.addEventListener("fuzzy-list-will-sort",()=>{n.stop()}),e.addEventListener("fuzzy-list-sorted",()=>{n.start(),n.navigate()})});let $=null;l(".js-pjax-files",e=>{if(!$)return void($=window.location.pathname);const t=e.querySelector(`a[href='${$}']`);t&&setTimeout((function(){document.activeElement&&document.activeElement!==document.body||t.focus()}),200),$=window.location.pathname});let U=null;const B=new WeakMap;function N(e){e.classList.remove("is-progress-bar");const t=c(e,".js-upload-manifest-file-container");f(t,".js-upload-progress").hidden=!0,f(t,".js-upload-meter-text .js-upload-meter-filename").textContent=""}function W(e){N(e.currentTarget)}function X(e){const t=c(e,"form",HTMLFormElement);return f(t,"#release_id",HTMLInputElement).value}d("file-attachment-accept",".js-upload-manifest-file",(function(e){const{attachments:t}=e.detail,s=parseInt(e.currentTarget.getAttribute("data-directory-upload-max-files")||"",10);t.length>s&&(e.preventDefault(),e.currentTarget.classList.add("is-too-many"))})),d("document:drop",".js-upload-manifest-tree-view",(async function(e){const{transfer:t}=e.detail,s=e.currentTarget,n=await j.traverse(t,!0),a=f(document,"#js-repo-pjax-container");a.addEventListener("pjax:success",()=>{f(a,".js-upload-manifest-file",v).attach(n)},{once:!0});const o=i(s,"data-drop-url");M({url:o,container:a})})),d("upload:setup",".js-upload-manifest-file",(async function(e){const{batch:t,form:s,preprocess:n}=e.detail,a=e.currentTarget;function o(){s.append("upload_manifest_id",B.get(a))}if(function(e,t){const s=c(e,".js-upload-manifest-file-container"),n=f(s,".js-upload-progress");n.hidden=!1,e.classList.add("is-progress-bar");const a=f(n,".js-upload-meter-text");f(a,".js-upload-meter-range-start").textContent=String(t.uploaded()+1),f(a,".js-upload-meter-range-end").textContent=String(t.size)}(a,t),B.get(a))return void o();if(U)return void n.push(U.then(o));const r=c(a,".js-upload-manifest-file-container").querySelector(".js-upload-manifest-form");U=fetch(r.action,{method:r.method,body:new FormData(r),headers:{Accept:"application/json"}});const[i,l]=function(){let e;return[new Promise(t=>{e=t}),e]}();n.push(i.then(o));const d=await U;if(!d.ok)return;const u=await d.json();f(document,".js-manifest-commit-form",HTMLFormElement).elements.namedItem("manifest_id").value=u.upload_manifest.id,B.set(a,u.upload_manifest.id),U=null,l()})),d("upload:start",".js-upload-manifest-file",(function(e){const{attachment:t,batch:s}=e.detail,n=c(e.currentTarget,".js-upload-manifest-file-container"),a=f(n,".js-upload-progress"),o=f(a,".js-upload-meter-text");f(o,".js-upload-meter-range-start").textContent=s.uploaded()+1,f(o,".js-upload-meter-filename").textContent=t.fullPath})),d("upload:complete",".js-upload-manifest-file",(function(e){const{attachment:t,batch:s}=e.detail,n=f(document,".js-manifest-commit-file-template",HTMLElement),a=f(n,".js-manifest-file-entry").cloneNode(!0);f(a,".js-filename").textContent=t.fullPath;const o=t.id;f(a,".js-remove-manifest-file-form",HTMLFormElement).elements.namedItem("file_id").value=o;const r=f(document,".js-manifest-file-list");r.hidden=!1,e.currentTarget.classList.add("is-file-list"),f(r,".js-manifest-file-list-root").appendChild(a),s.isFinished()&&N(e.currentTarget)})),d("upload:progress",".js-upload-manifest-file",(function(e){const{batch:t}=e.detail,s=c(e.currentTarget,".js-upload-manifest-file-container");f(s,".js-upload-meter").style.width=`${t.percent()}%`})),d("upload:error",".js-upload-manifest-file",W),d("upload:invalid",".js-upload-manifest-file",W),u(".js-remove-manifest-file-form",(async function(e,t){await t.html();const s=c(e,".js-manifest-file-list-root");if(c(e,".js-manifest-file-entry").remove(),!s.hasChildNodes()){c(s,".js-manifest-file-list").hidden=!0,f(document,".js-upload-manifest-file").classList.remove("is-file-list")}})),l(".js-manifest-ready-check",{initialize(e){!async function(e){const t=i(e,"data-redirect-url");try{await _(i(e,"data-poll-url")),window.location.href=t}catch(s){f(document,".js-manifest-ready-check").hidden=!0,f(document,".js-manifest-ready-check-failed").hidden=!1}}(e)}}),d("click",".js-release-remove-file",(function(e){const t=c(e.currentTarget,".js-release-file");t.classList.add("delete"),f(t,"input.destroy",HTMLInputElement).value="true"})),d("click",".js-release-undo-remove-file",(function(e){const t=c(e.currentTarget,".js-release-file");t.classList.remove("delete"),f(t,"input.destroy",HTMLInputElement).value=""}));let G=null;function J(e,t){t.append("release_id",X(e));const s=h(document,".js-releases-field .js-release-file.delete .id",HTMLInputElement);if(s.length){const e=s.map(e=>e.value);t.append("deletion_candidates",e.join(","))}}d("release:saved",".js-release-form",(function(e){const t=e.currentTarget;G=null;let s=!1;for(const a of t.querySelectorAll(".js-releases-field .js-release-file"))a.classList.contains("delete")?a.remove():a.classList.contains("js-template")||(s=!0);const n=f(t,".js-releases-field");n.classList.toggle("not-populated",!s),n.classList.toggle("is-populated",s)})),d("upload:setup",".js-upload-release-file",(function(e){const{form:t,preprocess:s}=e.detail,n=e.currentTarget;if(X(n))return void J(n,t);if(!G){const e=f(document,".js-save-draft",HTMLButtonElement);G=x(e)}const a=J.bind(null,n,t);s.push(G.then(a))})),d("upload:start",".js-upload-release-file",(function(e){const t=e.detail.policy;f(e.currentTarget,".js-upload-meter").classList.remove("d-none");const s=t.asset.replaced_asset;if(s)for(const n of h(document,".js-releases-field .js-release-file .id",HTMLInputElement))Number(n.value)===s&&c(n,".js-release-file").remove()})),d("upload:complete",".js-upload-release-file",(function(e){const{attachment:t}=e.detail,s=f(document,".js-releases-field"),n=f(s,".js-template").cloneNode(!0);n.classList.remove("d-none","js-template"),f(n,"input.id",HTMLInputElement).value=t.id;const a=t.name||t.href.split("/").pop();for(const r of n.querySelectorAll(".js-release-asset-filename"))r instanceof HTMLInputElement?r.value=a:r.textContent=a;const o=`(${(t.file.size/1048576).toFixed(2)} MB)`;f(n,".js-release-asset-filesize").textContent=o,s.appendChild(n),s.classList.remove("not-populated"),s.classList.add("is-populated"),f(e.currentTarget,".js-upload-meter").classList.add("d-none")})),d("upload:progress",".js-upload-release-file",(function(e){const{attachment:t}=e.detail;f(e.currentTarget,".js-upload-meter").style.width=`${t.percent}%`}));let V=class GetRepoElement extends HTMLElement{constructor(){super(...arguments),this.shouldRefreshList=!1}showDownloadMessage(e){const t=this.findPlatform(e);t&&this.showPlatform(t)}showCodespaces(e){const t=this.findPlatform(e);t&&(this.showPlatform(t),this.loadAndUpdateContent())}refreshList(){this.shouldRefreshList&&(this.shouldRefreshList=!1,this.loadAndUpdateContent())}trackDelete(){this.shouldRefreshList=!0}hideSpinner(){this.codespaceLoadingMenu.hidden=!0}showSpinner(){this.codespaceLoadingMenu.hidden=!1}onDetailsToggle(){this.modal.hidden=!1;for(const e of this.platforms)e.hidden=!0}showPlatform(e){this.modal.hidden=!0;for(const t of this.platforms)t.getAttribute("data-platform")===e&&(t.hidden=!1)}findPlatform(e){return e.currentTarget.getAttribute("data-open-app")||A()}loadAndUpdateContent(){this.codespaceList.setAttribute("src",i(this.codespaceList,"data-src"))}};e([t],V.prototype,"modal",void 0),e([t],V.prototype,"codespaceLoadingMenu",void 0),e([t],V.prototype,"codespaceList",void 0),e([s],V.prototype,"platforms",void 0),V=e([a],V)}}}));
//# sourceMappingURL=repositories-bootstrap-acdc804e.js.map
